# Neuromansui Server

A Next.js-based web server for viewing HTML reports generated by the Neuromansui tool.

## Overview

Neuromansui Server is designed to be a companion to the [neuromansui](https://github.com/MystenLabs/neuromansui) project, providing a web interface to browse and view the HTML reports, contract code, and other artifacts generated during the Sui Move smart contract development process.

## Features

- **Dashboard**: View all available reports in a clean, organized interface
- **Report Viewer**: Display interactive visualizations of error progression and contract refinements
- **Code Viewer**: Syntax-highlighted view of generated Move contracts
- **API**: Serve raw report data files for external processing
- **Error Handling**: Comprehensive error handling with detailed logging
- **Rate Limiting**: Simple rate limiting to protect against abuse

## Getting Started

### Prerequisites

- Node.js 18.x or later
- Reports generated by the neuromansui package

### Installation

1. Clone the repository:
```bash
git clone https://github.com/MystenLabs/neuromansui.git
cd neuromansui
```

2. Install dependencies:
```bash
cd neuromansui-server
npm install
```

3. Start the development server:
```bash
npm run dev
```

4. Open [http://localhost:3000](http://localhost:3000) in your browser

### Production Deployment

To build and run the server in production mode:

```bash
npm run build
npm run start
```

## Configuration

By default, the server looks for reports in the `../test_outputs` directory relative to the server root. This can be modified in the API routes if needed.

## Error Handling

The server includes robust error handling middleware that:

- Logs all requests and responses with timestamps
- Provides detailed error logging with stack traces in development mode
- Returns standardized error responses with appropriate HTTP status codes
- Handles different types of errors (not found, invalid request, etc.)

## Rate Limiting

A simple in-memory rate limiter prevents abuse of the API:

- Default limit of 60 requests per minute for general API routes
- Custom limits for specific endpoints (reports listing, file serving)
- Rate limits are based on client IP and API path
- Returns proper 429 Too Many Requests responses when limits are exceeded

## Docker Support

To include the server in the Docker setup, you can add it to the existing Dockerfile:

```dockerfile
# Set up Node.js environment for the server
FROM node:18-alpine AS server-builder
WORKDIR /app/neuromansui-server
COPY neuromansui-server/package*.json ./
RUN npm ci
COPY neuromansui-server/ ./
RUN npm run build

# Add server to the main image
COPY --from=server-builder /app/neuromansui-server/.next /app/neuromansui-server/.next
COPY --from=server-builder /app/neuromansui-server/node_modules /app/neuromansui-server/node_modules
COPY --from=server-builder /app/neuromansui-server/public /app/neuromansui-server/public
COPY --from=server-builder /app/neuromansui-server/package.json /app/neuromansui-server/package.json

# Add a command to start the server
CMD ["npm", "--prefix", "/app/neuromansui-server", "start"]
```

## API Endpoints

- `GET /api/reports`: List all available reports
- `GET /api/reports/:id?file=filename`: Get a specific report file

## License

This project is licensed under the same license as the neuromansui project (MIT License).
